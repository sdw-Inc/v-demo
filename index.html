<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Ê¨Ω„Å°„ÇÉ„Çì„ÅÆ‰ªÆË£ÖÂ§ßË≥û È¢® ÁÇπÊï∞Ë°®Á§∫</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background: #fff;
      color: #000;
      text-align: center;
      padding: 40px;
    }

    .score-wrapper {
      position: relative;
      width: 200px;
      height: 400px;
      margin: 0 auto;
      border: 2px solid #999;
      overflow: hidden;

      /* ÈÄÜ„Éî„É©„Éü„ÉÉ„ÉâÂΩ¢Áä∂„Å´Âàá„ÇäÊäú„Åç */
      clip-path: polygon(30% 100%, 70% 100%, 100% 0, 0 0);
    }

    .background {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to top,
        #E72E0D 0%,
        #E72E0D 33.3%,   /* Ëµ§ 1„Äú4 */
        #FFD130 33.3%,
        #FFD130 58.3%,   /* ÈªÑ 5„Äú7 */
        #2AAC09 58.3%,
        #2AAC09 100%     /* Á∑ë 8„Äú12 */
      );
      z-index: 1;
    }

    .mask {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #fff;
      z-index: 2;
      transform: translateY(0);
      transition: transform 0.5s cubic-bezier(0, 0, 0, 0.64);
    }

    .labels {
      position: relative;
      z-index: 3;
      display: flex;
      flex-direction: column-reverse;
      height: 100%;
    }

    .label {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-top: 1px solid #aaa;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="score-wrapper">
    <div class="background"></div>
    <div class="mask" id="mask"></div>
    <div class="labels">
      <div class="label">1</div>
      <div class="label">2</div>
      <div class="label">3</div>
      <div class="label">4</div>
      <div class="label">5</div>
      <div class="label">6</div>
      <div class="label">7</div>
      <div class="label">8</div>
      <div class="label">9</div>
      <div class="label">10</div>
      <div class="label">11</div>
      <div class="label">12</div>
    </div>
  </div>

  <!-- ÂäπÊûúÈü≥ -->
  <audio id="effectSound" src="effect.mp3" preload="auto"></audio>

  <script>
    const TOTAL_LAMPS = 12;

    window.onload = () => {
      const mask = document.getElementById("mask");
      const sound = document.getElementById("effectSound");

      // 0.1Âàª„Åø„Åß„É©„É≥„ÉÄ„É†ÂÄ§ (0.1 ~ 12.0)
      const randomStep = Math.round((Math.random() * TOTAL_LAMPS) * 10) / 10;
      const stepPercent = 100 / TOTAL_LAMPS;
      const translateY = -(randomStep * stepPercent);

      console.log("üé≤ ÊäΩÈÅ∏„Çπ„Ç≥„Ç¢:", randomStep, " ‚Üí translateY:", translateY + "%");

      // transform „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈñãÂßã
      requestAnimationFrame(() => {
        mask.style.transform = `translateY(${translateY}%)`;
      });

      // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÁµÇ‰∫ÜÊôÇ„Å´ÂäπÊûúÈü≥„ÇíÂÜçÁîü
      mask.addEventListener("transitionend", () => {
        sound.currentTime = 0; // ÂÖàÈ†≠„Å´Êàª„Åô
        sound.play().catch(err => console.log("ÂÜçÁîü„Ç®„É©„Éº:", err));
      }, { once: true });
    };
  </script>
</body>
</html>
